<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è–¬å‰¤é¸å®šçµæœ</title>

<style>
body {
  font-family: sans-serif;
  background: #f5f7fa;
  padding: 20px;
}

.box {
  background: #fff;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  margin-bottom: 16px;
}

h1 {
  margin-bottom: 12px;
}

input {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
  margin-top: 10px;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 14px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  background: #007aff;
  color: white;
}

.sub {
  background: #d1d1d1;
  color: #333;
}

.karte {
  background: #fff;
  padding: 14px;
  border-radius: 12px;
  margin-top: 10px;
  font-size: 14px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}
</style>
</head>

<body>

<h1>â‘¢ è–¬å‰¤é¸å®š</h1>

<div class="box" id="result">èª­ã¿è¾¼ã¿ä¸­...</div>

<div class="box">
  <h2>ğŸ§¾ ã‚«ãƒ«ãƒ†ä¿å­˜</h2>
  <input id="customer" placeholder="ãŠå®¢ã•ã¾å">
  <button onclick="saveKarte()">ã“ã®å†…å®¹ã§ä¿å­˜</button>
</div>

<div class="box">
  <h2>ğŸ“š ã‚«ãƒ«ãƒ†å±¥æ­´</h2>
  <div id="history"></div>
</div>

<button onclick="location.href='index.html'">è‰²å‘³ã«æˆ»ã‚‹</button>
<button class="sub" onclick="location.href='hair.html'">é«ªã®çŠ¶æ…‹ã«æˆ»ã‚‹</button>

<script>
/* URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾— */
const params = new URLSearchParams(location.search);
const color = params.get("color");
const hair = params.get("hair");

/* è–¬å‰¤ãƒ‡ãƒ¼ã‚¿ */
const data = {
  "1#": { both: "ã‚ªãƒ•ãƒ–ãƒ©ãƒƒã‚¯" },
  "NB": { both: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼5 / ã‚ªã‚­ã‚·3% 2å€" },
  "2#": { both: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼5 / ã‚ªã‚­ã‚·4.5% 2å€" },
  "3#": {
    color: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼7 / ã‚ªã‚­ã‚·3% 2å€",
    bleach: "ãƒ ãƒ¼ãƒ‰ã‚¹ãƒ¢ãƒ¼ã‚¯7 + ãƒãƒ«ã‚³ã‚³ã‚¢7ï¼ˆ1:1ï¼‰/ ã‚ªã‚­ã‚·3%"
  },
  "4#": {
    color: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼9 / ã‚ªã‚­ã‚·4.5% 2å€",
    bleach: "ãƒ ãƒ¼ãƒ‰ã‚¹ãƒ¢ãƒ¼ã‚¯7 + ãƒãƒ«ã‚³ã‚³ã‚¢7ï¼ˆ1:1ï¼‰/ ã‚ªã‚­ã‚·4.5% 2å€"
  },
  "5#": {
    color: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼13 / ã‚ªã‚­ã‚·6% 2å€",
    bleach: "ãƒãƒ«ã‚³ã‚³ã‚¢9 / ã‚ªã‚­ã‚·6% 2å€"
  },
  "6#": {
    color: "ãƒ ãƒ¼ãƒ‰ã‚¹ãƒ¢ãƒ¼ã‚¯13 / ã‚ªã‚­ã‚·6% 2å€",
    bleach: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼9 + ãƒãƒ«ã‚³ã‚³ã‚¢9 / ã‚ªã‚­ã‚·6%"
  },
  "6A": {
    color: "âš  ã‚«ãƒ©ãƒ¼æ¯›ä¸å¯ï¼ˆãƒ–ãƒªãƒ¼ãƒå¿…é ˆï¼‰",
    bleach: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼9 / ã‚ªã‚­ã‚·4.5% 2å€"
  },
  "7A": {
    color: "âš  ã‚«ãƒ©ãƒ¼æ¯›ä¸å¯ï¼ˆãƒ–ãƒªãƒ¼ãƒå¿…é ˆï¼‰",
    bleach: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼9 + ã‚¹ãƒ†ãƒ©13 / ã‚ªã‚­ã‚·4.5% 2å€"
  },
  "8#": {
    color: "âš  ã‚«ãƒ©ãƒ¼æ¯›ä¸å¯ï¼ˆãƒ–ãƒªãƒ¼ãƒå¿…é ˆï¼‰",
    bleach: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼13 + ãƒãƒ«ã‚³ã‚³ã‚¢9ï¼ˆ10%ï¼‰/ ã‚ªã‚­ã‚·3% 2å€"
  },
  "29#": { both: "ã‚¹ãƒ†ãƒ©ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼13 / ã‚ªã‚­ã‚·3% 2å€" }
};

/* çµæœè¡¨ç¤º */
const box = document.getElementById("result");
if (!color || !hair) {
  box.innerText = "é¸æŠæƒ…å ±ãŒä¸è¶³ã—ã¦ã„ã¾ã™";
} else {
  const item = data[color];
  const text = item.both ?? item[hair];
  box.innerHTML = `<strong>${color} / ${hair === "color" ? "ã‚«ãƒ©ãƒ¼æ¯›" : "ãƒ–ãƒªãƒ¼ãƒæ¯›"}</strong><br>${text}`;
}

/* ã‚«ãƒ«ãƒ†ä¿å­˜ */
function saveKarte() {
  const name = document.getElementById("customer").value.trim();
  if (!name) {
    alert("ãŠå®¢ã•ã¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
    return;
  }

  const karte = {
    date: new Date().toLocaleString(),
    name,
    color,
    hair,
    result: box.innerText
  };

  const list = JSON.parse(localStorage.getItem("karteList") || "[]");
  list.unshift(karte);
  if (list.length > 10) list.pop();

  localStorage.setItem("karteList", JSON.stringify(list));
  document.getElementById("customer").value = "";
  renderHistory();
}

/* å±¥æ­´è¡¨ç¤º */
function renderHistory() {
  const area = document.getElementById("history");
  const list = JSON.parse(localStorage.getItem("karteList") || "[]");

  area.innerHTML = list.length === 0 ? "å±¥æ­´ãªã—" : "";

  list.forEach(k => {
    area.innerHTML += `
      <div class="karte">
        <strong>${k.name}</strong><br>
        ${k.date}<br>
        ${k.result}
      </div>
    `;
  });
}

renderHistory();
</script>

</body>
</html>
