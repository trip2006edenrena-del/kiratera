<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚«ãƒ«ãƒ†ä¸€è¦§</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f5f7fa; padding: 80px 20px 20px; }
h1 { margin-top: 0; }
.card { background: #fff; padding: 16px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 16px; }
.card p { margin: 4px 0; }
button { padding: 8px 12px; border-radius: 10px; border: none; cursor: pointer; margin-top: 8px; }
.delete-btn { background: #ff4d4d; color: #fff; }
.fixed-top {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: #007aff;
  color: #fff;
  padding: 12px 20px;
  font-size: 16px;
  z-index: 1000;
  border: none;
  cursor: pointer;
  border-radius: 0 0 12px 12px;
}
.success { background: #ffd700; }
.normal { background: #cfd8dc; }
.fail { background: #ff4d4d; color: #fff; }
</style>
</head>
<body>

<button class="fixed-top" onclick="location.href='record.html'">ğŸ“ æ–°ã—ã„ã‚«ãƒ«ãƒ†ä½œæˆ</button>

<h1>ğŸ“„ ä¿å­˜æ¸ˆã¿ã‚«ãƒ«ãƒ†ä¸€è¦§</h1>
<div id="list"></div>

<script>
function renderList() {
  const list = document.getElementById("list");
  const records = JSON.parse(localStorage.getItem("records") || "[]");
  if(records.length === 0){
    list.innerHTML = "<p>ä¿å­˜ã•ã‚ŒãŸã‚«ãƒ«ãƒ†ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
    return;
  }
  list.innerHTML = "";
  records.forEach((r, index) => {
    const div = document.createElement("div");
    div.className = "card";

    // è©•ä¾¡ã®è‰²åˆ†ã‘
    let ratingColor = "";
    if(r.rating.includes("æˆåŠŸ")) ratingColor = "success";
    else if(r.rating.includes("æ™®é€š")) ratingColor = "normal";
    else if(r.rating.includes("åçœ")) ratingColor = "fail";

    div.innerHTML = `
      <p><strong>æ—¥ä»˜:</strong> ${r.date}</p>
      <p><strong>åå‰:</strong> ${r.name}</p>
      <p><strong>è‰²å‘³:</strong> ${r.color}</p>
      <p><strong>é«ªçŠ¶æ…‹:</strong> ${r.hair}</p>
      <p><strong>è©•ä¾¡:</strong> <span class="${ratingColor}">${r.rating}</span></p>
      <p><strong>ãƒ¡ãƒ¢:</strong> ${r.memo}</p>
      <button class="delete-btn" onclick="deleteRecord(${index})">å‰Šé™¤</button>
    `;
    list.appendChild(div);
  });
}

function deleteRecord(idx){
  const records = JSON.parse(localStorage.getItem("records") || "[]");
  if(!confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) return;
  records.splice(idx,1);
  localStorage.setItem("records", JSON.stringify(records));
  renderList();
}

renderList();
</script>

</body>
</html>
