<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚«ãƒ«ãƒ†è¨˜éŒ²</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f5f7fa;
  padding: 120px 20px 20px; /* ä¸Šéƒ¨å›ºå®šãƒŠãƒ“ãƒãƒ¼åˆ† */
  margin: 0;
}
h1 { margin-top: 0; text-align: center; }

.box {
  background: #fff;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  margin-bottom: 16px;
}

label { font-weight: bold; display: block; margin-bottom: 6px; }

input, textarea {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
}
textarea { min-height: 80px; }

.star-btn {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  font-size: 18px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
}
.success { background: #ffd700; }
.normal { background: #cfd8dc; }
.fail { background: #ff4d4d; color: #fff; }

button.save-btn {
  width: 100%;
  padding: 14px;
  margin-top: 12px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  background: #007aff;
  color: #fff;
  cursor: pointer;
}

.sub { background: #9aa0a6; }

/* ä¸Šéƒ¨ãƒŠãƒ“ãƒãƒ¼ */
.fixed-top-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  gap: 8px;
  padding: 10px;
  background: #007aff;
  z-index: 1000;
  flex-wrap: wrap;
  box-sizing: border-box;
}
.fixed-top-container button {
  flex: 1;
  min-width: 120px;
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 16px;
  color: #fff;
  background: #005fcc;
  cursor: pointer;
}
@media(max-width:600px){
  .fixed-top-container{flex-direction:column; gap:6px;}
  .fixed-top-container button{font-size:14px;}
}
</style>
</head>
<body>

<!-- ä¸Šéƒ¨ãƒŠãƒ“ãƒãƒ¼ -->
<div class="fixed-top-container">
  <button onclick="location.href='record_list.html'">ğŸ“„ ä¿å­˜æ¸ˆã¿ã‚«ãƒ«ãƒ†ä¸€è¦§</button>
  <button onclick="location.href='index.html'">ğŸ¨ è‰²å‘³é¸æŠ</button>
</div>

<h1>ğŸ“ ã‚«ãƒ«ãƒ†è¨˜éŒ²</h1>

<div class="box">
  <label>ãŠå®¢ã•ã¾å</label>
  <input type="text" id="customer" placeholder="ä¾‹ï¼šå±±ç”°ã•ã¾">
</div>

<div class="box">
  <p id="info"></p>
</div>

<div class="box">
  <label>ä»•ä¸ŠãŒã‚Šè©•ä¾¡</label>
  <button class="star-btn success" onclick="setResult('â­ æˆåŠŸ')">â­ æˆåŠŸ</button>
  <button class="star-btn normal" onclick="setResult('â–³ æ™®é€š')">â–³ æ™®é€š</button>
  <button class="star-btn fail" onclick="setResult('âœ• åçœ')">âœ• åçœ</button>
</div>

<div class="box">
  <label>ãƒ¡ãƒ¢ï¼ˆåçœãƒ»æˆåŠŸãƒã‚¤ãƒ³ãƒˆãªã©ï¼‰</label>
  <textarea id="memo" placeholder="ä¾‹ï¼šæ”¾ç½®æ™‚é–“ãŒå°‘ã—é•·ã‹ã£ãŸã‹ã‚‚"></textarea>
</div>

<button class="save-btn" onclick="saveRecord()">ğŸ’¾ ã‚«ãƒ«ãƒ†ã‚’ä¿å­˜</button>

<script>
// URLã‹ã‚‰è‰²å‘³ãƒ»é«ªçŠ¶æ…‹ã‚’å–å¾—
const params = new URLSearchParams(location.search);
const color = params.get("color");
const hair = params.get("hair");
let result = null;

// é«ªã®çŠ¶æ…‹å¤‰æ›
let hairState = "ä¸æ˜";
if(hair==="color") hairState="ã‚«ãƒ©ãƒ¼æ¯›";
else if(hair==="bleach") hairState="ãƒ–ãƒªãƒ¼ãƒæ¯›";

document.getElementById("info").innerHTML = `è‰²å‘³ï¼š<strong>${color??'ä¸æ˜'}</strong><br>é«ªã®çŠ¶æ…‹ï¼š<strong>${hairState}</strong>`;

// è©•ä¾¡é¸æŠ
function setResult(r){ result=r; alert("è©•ä¾¡ã‚’é¸æŠã—ã¾ã—ãŸï¼š"+r); }

// ä¿å­˜
function saveRecord(){
  const name = document.getElementById("customer").value;
  const memo = document.getElementById("memo").value;
  if(!name || !result){ alert("åå‰ã¨è©•ä¾¡ã¯å¿…é ˆã§ã™"); return; }

  const record = {
    date: new Date().toLocaleString(),
    name,
    color: color ?? "ä¸æ˜",
    hair: hairState,
    rating: result,
    memo
  };

  const records = JSON.parse(localStorage.getItem("records") || "[]");
  records.unshift(record);
  localStorage.setItem("records", JSON.stringify(records));

  location.href="record_list.html";
}
</script>
</body>
</html>
