<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ–½è¡“ã‚«ãƒ«ãƒ†</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f5f7fa;
  padding: 20px;
}

.box {
  background: #fff;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  margin-bottom: 16px;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  background: #007aff;
  color: white;
}

.star { background: #ffb703; }
.ok { background: #34c759; }
.ng { background: #ff3b30; }

textarea {
  width: 100%;
  height: 100px;
  margin-top: 10px;
  padding: 10px;
  font-size: 15px;
  border-radius: 10px;
  border: 1px solid #ccc;
}
</style>
</head>

<body>

<h1>ğŸ—‚ æ–½è¡“ã‚«ãƒ«ãƒ†</h1>

<div class="box" id="info"></div>

<div class="box">
  <h3>ä»•ä¸ŠãŒã‚Šè©•ä¾¡</h3>
  <button class="star" onclick="setResult('â­ æˆåŠŸ')">â­ æˆåŠŸ</button>
  <button class="ok" onclick="setResult('â–³ æ™®é€š')">â–³ æ™®é€š</button>
  <button class="ng" onclick="setResult('âœ• åçœ')">âœ• åçœ</button>
</div>

<div class="box">
  <h3>ãƒ¡ãƒ¢</h3>
  <textarea id="memo" placeholder="è‰²ã®å…¥ã‚Šãƒ»æš—ããªã£ãŸï¼è‰¯ã‹ã£ãŸç‚¹ãªã©"></textarea>
</div>

<button onclick="save()">ä¿å­˜ã™ã‚‹</button>
<button onclick="location.href='index.html'">è‰²å‘³é¸æŠã«æˆ»ã‚‹</button>

<script>
const params = new URLSearchParams(location.search);
const color = params.get("color");
const hair = params.get("hair");

let result = "";

document.getElementById("info").innerHTML =
  `è‰²å‘³ï¼š${color}<br>é«ªã®çŠ¶æ…‹ï¼š${hair === "color" ? "ã‚«ãƒ©ãƒ¼æ¯›" : "ãƒ–ãƒªãƒ¼ãƒæ¯›"}`;

function setResult(r) {
  result = r;
  alert(r + " ã‚’é¸æŠã—ã¾ã—ãŸ");
}

function save() {
  if (!result) {
    alert("è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„");
    return;
  }

  const memo = document.getElementById("memo").value;

  const record = {
    date: new Date().toLocaleString(),
    color,
    hair,
    result,
    memo
  };

  const records = JSON.parse(localStorage.getItem("records") || "[]");
  records.push(record);
  localStorage.setItem("records", JSON.stringify(records));

  alert("ã‚«ãƒ«ãƒ†ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼");
}
</script>

</body>
</html>
